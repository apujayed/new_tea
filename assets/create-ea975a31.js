import{G as Y,O as W,s as H,r as a,j as e,k as Be,n as B,l as $e,d as A,a as F,o as Oe}from"./index-9bd05b6a.js";import{I as c}from"./input-ff7d458e.js";import{e as qe,f as De,g as ze,b as Ze}from"./index.esm-23b2bf72.js";import{b as We,c as He,T as Te,d as Ae,e as Fe,g as ke,h as Pe,L as Re,a as Ue,i as Ye}from"./index.esm-366b6b52.js";import{a as Ke}from"./index.esm-a3480178.js";import{B as ue}from"./button-00ad170d.js";import{B as b}from"./combobox-7458bbdd.js";function Ie(r){return Y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.003 7.754a.75.75 0 0 1 .75-.75h5.232a.75.75 0 0 1 .53 1.28l-2.776 2.777c.55.097 1.057.253 1.492.483.905.477 1.504 1.284 1.504 2.418 0 .966-.471 1.75-1.172 2.27-.687.511-1.587.77-2.521.77-1.367 0-2.274-.528-2.667-.756a.75.75 0 0 1 .755-1.297c.331.193.953.553 1.912.553.673 0 1.243-.188 1.627-.473.37-.275.566-.635.566-1.067 0-.5-.219-.836-.703-1.091-.538-.284-1.375-.443-2.471-.443a.75.75 0 0 1-.53-1.28l2.643-2.644h-3.421a.75.75 0 0 1-.75-.75ZM7.88 15.215a1.4 1.4 0 0 0-1.446.83.75.75 0 0 1-1.37-.61 2.899 2.899 0 0 1 2.986-1.71c.589.06 1.139.323 1.557.743.434.446.685 1.058.685 1.778 0 1.641-1.254 2.437-2.12 2.986-.538.341-1.18.694-1.495 1.273H9.75a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75c0-1.799 1.337-2.63 2.243-3.21 1.032-.659 1.55-1.031 1.55-1.8 0-.355-.116-.584-.26-.732a1.071 1.071 0 0 0-.652-.298Zm.234-13.121a.75.75 0 0 1 .386.656V9h1.252a.75.75 0 0 1 0 1.5H5.75a.75.75 0 0 1 0-1.5H7V4.103l-.853.533a.749.749 0 1 1-.795-1.272l2-1.25a.749.749 0 0 1 .762-.02Z"}}]})(r)}function Qe(r){return Y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.25 12a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM5.5 9.25a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM6.25 5a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM9 12.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Zm.75-4.25a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM9 5.75A.75.75 0 0 1 9.75 5h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 9 5.75ZM13.25 12a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm-.75-2.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM13.25 5a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"}},{tag:"path",attr:{d:"M2 20V3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v17c0 .173-.022.34-.063.5H20a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.2-.4l-.5-.375a.75.75 0 0 1 .9-1.2l.5.375c.504.378.8.97.8 1.6v8a2 2 0 0 1-2 2h-3.562a.767.767 0 0 1-.166-.018c-.089.012-.18.018-.272.018h-3.75a.75.75 0 0 1-.75-.75V19h-3v2.25a.75.75 0 0 1-.75.75H4a2 2 0 0 1-2-2Zm2 .5h3v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25h3a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H4a.5.5 0 0 0-.5.5v17a.5.5 0 0 0 .5.5Z"}}]})(r)}function Je(r){return Y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 8v11c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4c0-1.103-.897-2-2-2H6c-1.206 0-3 .799-3 3v3zm3-4h13v12H5V5c0-.806.55-.988 1-1z"}},{tag:"path",attr:{d:"M11 14h2v-3h3V9h-3V6h-2v3H8v2h3z"}}]})(r)}const Xe=new W(H);function ea(){const[r,s]=a.useState({companyname:"",contactnumber:"",emailaddress:"",licencenumber:"",binnumber:"",managingdirector:"",tinnumber:""}),l=i=>{const{name:f,value:L}=i.target;s(d=>({...d,[f]:L}))},C=["Bidder","Broker","Association","Viewer","Warehouse","Factory",,"Teaboard"],[v,N]=a.useState(),m=async()=>{const{companyname:i,contactnumber:f,emailaddress:L,licencenumber:d,binnumber:h,managingdirector:_,tinnumber:g}=r,k={Company_name:i,Managing_director:_,Email_address:L,Contact_number:f,Bin_number:h,Tin_number:g,Licence_number:d,Account_type:v};try{await Xe.collection("profiles").create(k),window.location.reload()}catch{throw new Error}},x=i=>{i.preventDefault(),B.promise(m(),{loading:"Verifying login credential...",success:e.jsx("b",{children:"Success! You've created a new profile"}),error:e.jsx("b",{children:"Failed! Something went wrong"})})};return e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:x,className:"mx-auto shadow sm:p-8 p-4 rounded-lg",children:[e.jsx(c,{handle_input_change:l,icon:Qe,title:"Company name",type:"text",placeholder:"Company name here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:qe,title:"Managing director",type:"text",placeholder:"Managing director name here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:We,title:"Bin number",type:"number",placeholder:"Bin number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:Be,title:"Tin number",type:"text",placeholder:"Tin number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:Ke,title:"Licence number",type:"text",placeholder:"Licence number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:He,title:"Contact number",type:"text",placeholder:"Contact number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:l,icon:De,title:"Email address",type:"text",placeholder:"Email address here..."}),e.jsx("div",{className:"h-2"}),e.jsx("p",{className:"mb-2",children:"Select Account Type"}),e.jsx(b,{selected:v,data:C,change:N}),e.jsx("div",{className:"h-3"}),e.jsx(ue,{type:"submit",name:"Create Profile",icon:Je})]})})}const Ee=new W(H);Ee.autoCancellation(!1);function aa(){const[r,s]=a.useState([]),[l,C]=a.useState([]);a.useEffect(()=>{(async()=>{const d=await Ee.collection("profiles").getFullList({sort:"-created"}),h=d.map(g=>g.Company_name);s(h);const _=d.map(g=>({id:g.id,name:g.Company_name}));C(_)})()},[]);const[v,N]=a.useState({username:"",password:""}),m=d=>{const{name:h,value:_}=d.target;N(g=>({...g,[h]:_}))},[x,i]=a.useState(),f=async()=>{if(x===void 0)B.error("Please pick a reference account");else{const{username:d,password:h}=v;let _="";l.map(k=>{k.name===x&&(_=k.id)});const g={username:d,password:h,passwordConfirm:h,reference:_};try{await Ee.collection("users").create(g),window.location.reload()}catch{throw new Error}}},L=d=>{d.preventDefault(),B.promise(f(),{loading:"Data processing is underway",success:e.jsx("b",{children:"Success! You've created a new profile"}),error:e.jsx("b",{children:"Failed! Something went wrong"})})};return e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:L,className:"mx-auto shadow sm:p-8 p-4 rounded-lg",children:[e.jsx(c,{handle_input_change:m,icon:De,title:"Username",type:"text",placeholder:"Username here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:m,icon:ze,title:"Password",type:"password",placeholder:"Password here..."}),e.jsx("div",{className:"h-2"}),e.jsx("p",{className:"mb-2",children:"Select Reference Account"}),e.jsx(b,{selected:x,data:r,change:i}),e.jsx("div",{className:"h-3"}),e.jsx(ue,{type:"submit",name:"Create Profile",icon:$e})]})})}new W(H);function ta(){a.useState({username:"",password:"",managingdirector:"",licencenumber:"",emailaddress:"",contactnumber:"",binnumber:"",tinnumber:"",companyname:""}),a.useState(!1),a.useState([]),a.useState("");const r=[{name:"Profile",content:e.jsx(ea,{})},{name:"Auth Profile",content:e.jsx(aa,{})}];return e.jsx("div",{className:"sm:mt-12 p-4",children:e.jsx(Te,{tabsData:r})})}function Me(r){return Y({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M2.48 0a1.55 1.55 0 1 0 0 3.1 1.55 1.55 0 0 0 0-3.1zm19.04 0a1.55 1.55 0 1 0 0 3.101 1.55 1.55 0 0 0 0-3.101zM12 2.295a1.55 1.55 0 1 0 0 3.1 1.55 1.55 0 0 0 0-3.1zM2.48 5.272a2.48 2.48 0 1 0 0 4.96 2.48 2.48 0 0 0 0-4.96zm19.04 0a2.48 2.48 0 1 0 0 4.96 2.48 2.48 0 0 0 0-4.96zM12 8.496a1.55 1.55 0 1 0 0 3.1 1.55 1.55 0 0 0 0-3.1zm-9.52 3.907a1.55 1.55 0 1 0 0 3.1 1.55 1.55 0 0 0 0-3.1zm19.04 0a1.55 1.55 0 1 0 0 3.102 1.55 1.55 0 0 0 0-3.102zM12 13.767a2.48 2.48 0 1 0 0 4.962 2.48 2.48 0 0 0 0-4.962zm-9.52 3.907a2.48 2.48 0 1 0 .001 4.962 2.48 2.48 0 0 0 0-4.962zm19.04.93a1.55 1.55 0 1 0 0 3.102 1.55 1.55 0 0 0 0-3.101zM12 20.9a1.55 1.55 0 1 0 0 3.1 1.55 1.55 0 0 0 0-3.1Z"}}]})(r)}function sa(r){return Y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"View_Timeline"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M18.436,20.94H5.562a2.5,2.5,0,0,1-2.5-2.5V5.567a2.5,2.5,0,0,1,2.5-2.5H18.436a2.5,2.5,0,0,1,2.5,2.5V18.44A2.5,2.5,0,0,1,18.436,20.94ZM5.562,4.067a1.5,1.5,0,0,0-1.5,1.5V18.44a1.5,1.5,0,0,0,1.5,1.5H18.436a1.5,1.5,0,0,0,1.5-1.5V5.567a1.5,1.5,0,0,0-1.5-1.5Z"}},{tag:"path",attr:{d:"M6.544,8.287h0a.5.5,0,0,1,0-1H12a.5.5,0,0,1,0,1Z"}},{tag:"path",attr:{d:"M9.271,12.5h0a.5.5,0,0,1,0-1h5.454a.5.5,0,0,1,0,1Z"}},{tag:"path",attr:{d:"M12,16.724h0a.5.5,0,0,1,0-1h5.455a.5.5,0,0,1,0,1Z"}}]}]}]})(r)}function Ge(r){return Y({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.61 3l5.74 1.53L15 5v6.74l-.37.48-6.13 1.69-6.14-1.69-.36-.48V5l.61-.47L8.34 3h.27zm-.09 1l-4 1 .55.2 3.43.9 3-.81.95-.29-3.93-1zM3 11.36l5 1.37V7L3 5.66v5.7zM9 7v5.73l5-1.37V5.63l-2.02.553V8.75l-1 .26V6.457L9 7z"}}]})(r)}const ee=new W(H);ee.autoCancellation(!1);function ra(){const[r,s]=a.useState([]),[l,C]=a.useState(),[v,N]=a.useState(),[m,x]=a.useState(0),[i,f]=a.useState(0),[L,d]=a.useState(0),[h,_]=a.useState(),[g,k]=a.useState([]),[K,me]=a.useState(),[ae,he]=a.useState(["BOP","GBOP","GOF","OF"]),[q,Ne]=a.useState(),[Q,te]=a.useState(),[J,Le]=a.useState(),[z,pe]=a.useState(["DUST","LEAF","SUPPLEMENT"]),[$,xe]=a.useState(),[se,re]=a.useState([]),[ne,ge]=a.useState(),[Ce,fe]=a.useState([]),[X,_e]=a.useState(!1),[ye,je]=a.useState(),[p,be]=a.useState({}),y=D=>{const{name:n,value:G}=D.target;be(S=>({...S,[n]:G}))};a.useEffect(()=>{p.package!==void 0&&p.netweight!==void 0&&x(p.package*p.netweight)},[p]),a.useEffect(()=>{f(m-L)},[m]),a.useEffect(()=>{f(m-L)},[L]),a.useEffect(()=>{$==="LEAF"?d(1.5):$==="DUST"?d(.8):$==="SUPPLEMENT"&&d(.5)},[$]),a.useEffect(()=>{(async()=>{const D=await ee.collection("profiles").getFullList({sort:"-created"});C(D);const n=[],G=[];A(`${F}`,"factories").map((j,O)=>{n.push(j.Company_name)}),s(n),A(`${F}`,"warehouses").map((j,O)=>{G.push(j.Company_name)}),k(G);const ie=await ee.collection("rating").getFullList();N(ie);const T=[],w=[];A(`${F}`,"leafs").map((j,O)=>{T.push(j.Name)}),re(T),A(`${F}`,"liquors").map((j,O)=>{w.push(j.Name)}),fe(w);const o=new Date().getFullYear(),I=o+1,M=[];M.push(`${o} ${I}`),te(M),Le(M[0])})()},[]);const Se=()=>{if(!X){_e(!0);let D=null,n=null,G=null,S=null;A(`${F}`,"factories").map((o,I)=>{o.Company_name===h&&(n=o.id)}),A(`${F}`,"warehouses").map((o,I)=>{o.Company_name===K&&(D=o.id)}),A(`${F}`,"leafs").map((o,I)=>{o.Name===ne&&(G=o.id)}),A(`${F}`,"liquors").map((o,I)=>{o.Name===ye&&(S=o.id)});const E=p.season?p.season:`${Q[0]}`;console.log(E);const P={Sale_number:parseInt(p.salenumber),Lot_number:parseInt(p.lotnumber),Invoice:p.invoicenumber,Total_kg:parseInt(m),Grand_total:parseFloat(i),Offer_price:parseInt(p.offerprice),Category:$,Grade:q,brokersID:ee.authStore.model.id,Factory:n,Liquor_rating:S,Warehose:D,Leaf_rating:G,Season:E,Gross_weight:parseFloat(p.grossweight),Net_weight:parseInt(p.netweight),Collection:parseFloat(L),Package:parseInt(p.package)};try{(async()=>(await ee.collection("catalog").create(P),B.success("Catalog created successfully!"),window.location.reload()))()}catch(o){B.error(o)}}},ce=D=>{D.preventDefault(),Se()};return e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:ce,className:"mx-auto shadow sm:p-8 p-4 rounded-lg",children:[e.jsx(c,{handle_input_change:y,icon:Ie,title:"Sale number",type:"number",placeholder:"Sale number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:Ae,title:"Lot number",type:"number",placeholder:"Lot number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:Fe,title:"Invoice number",type:"text",placeholder:"Invoice number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:Me,title:"Gross weight",type:"text",placeholder:"Gross weight here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:ke,title:"Net weight",type:"number",placeholder:"Net weight here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:Ge,title:"Package",type:"number",placeholder:"Package here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{defaultValue:Q,handle_input_change:y,icon:sa,title:"Season",type:"text",placeholder:"Season e.g. 2022 2023"}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:y,icon:Pe,title:"Offer price",type:"number",placeholder:"Offer price here..."}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Leaf Rating"}),e.jsx(b,{selected:ne,data:se,change:ge}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Liquor Rating"}),e.jsx(b,{selected:ye,data:Ce,change:je}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Factory "}),e.jsx(b,{selected:h,data:r,change:_}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Warehouse"}),e.jsx(b,{selected:K,data:g,change:me}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Grade"}),e.jsx(b,{selected:q,data:ae,change:Ne}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Category"}),e.jsx(b,{selected:$,data:z,change:xe}),e.jsx("div",{className:"h-3"}),e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("p",{children:["Total KG: ",e.jsx("span",{className:"font-semibold text-black/50",children:m})]}),e.jsxs("p",{children:["Grand Total: ",e.jsx("span",{className:"font-semibold text-black/50",children:i})]}),e.jsxs("p",{children:["Collection: ",e.jsx("span",{className:"font-semibold text-black/50",children:L})]})]}),e.jsx("div",{className:"h-3"}),e.jsx(ue,{type:"submit",name:"Create Catalog",icon:Oe})]})})}const V=new W(H);V.autoCancellation(!1);function na({click:r,data:s}){const[l,C]=a.useState([]),[v,N]=a.useState(),[m,x]=a.useState(),[i,f]=a.useState(0),[L,d]=a.useState(0),[h,_]=a.useState(0),[g,k]=a.useState(),[K,me]=a.useState([]),[ae,he]=a.useState(),[q,Ne]=a.useState(["BOP","GBOP","GOF","OF"]),[Q,te]=a.useState(q[0]);a.useState(),a.useState();const[J,Le]=a.useState(["DUST","LEAF","SUPPLEMENT"]),[z,pe]=a.useState(J[0]),[$,xe]=a.useState([]),[se,re]=a.useState(),[ne,ge]=a.useState([]),[Ce,fe]=a.useState([]),[X,_e]=a.useState(),[ye,je]=a.useState(),[p,be]=a.useState([]),[y,Se]=a.useState(),[ce,D]=a.useState(),[n,G]=a.useState({}),S=T=>{const{name:w,value:E}=T.target;G(P=>({...P,[w]:E}))};a.useEffect(()=>{(async()=>{const T=await V.collection("rating").getFullList();x(T);const w=[],E=[];let P=null,o=null;T.map((t,u)=>{t.Type==="Leaf"&&w.push(t.Name),t.Type==="Leaf"&&t.id===s.Leaf_rating&&(P=t.Name),t.Type==="Liquor"&&E.push(t.Name),t.Type==="Liquor"&&t.id===s.Liquor_rating&&(o=t.Name)}),xe(w),w.map((t,u)=>{t===P&&re(w[u])}),E.map((t,u)=>{t===o&&D(E[u])}),ge(E);const I=await V.collection("profiles").getFullList({sort:"-created"});N(I);const M=[],j=[];let O,R;I.map((t,u)=>{t.Account_type==="Factory"&&M.push(t.Company_name),t.Account_type==="Factory"&&t.id===s.Factory&&(O=t.Company_name),t.Account_type==="Warehouse"&&j.push(t.Company_name),t.Account_type==="Warehouse"&&t.id===s.Warehose&&(R=t.Company_name)}),C(M),me(j),M.map((t,u)=>{t===O&&k(M[u])}),j.map((t,u)=>{t===R&&he(j[u])}),J.map((t,u)=>{t===s.Category&&pe(J[u])}),q.map((t,u)=>{t===s.Grade&&te(q[u])}),f(s.Package*s.Net_weight);const Z=await V.collection("users").getFullList({sort:"-created"});be(Z);let oe=[];Z.map(t=>{oe.push(t.username)}),fe(oe);const U=await V.collection("auction_info").getFirstListItem(`catalog="${s.id}"`);U&&(Se(U),je(U.price_max)),Z.map(t=>{t.id===U.bidder_current&&_e(t.username)})})()},[]),a.useEffect(()=>{_(z==="LEAF"?1.5:z==="DUST"?.8:.5)},[z]),a.useEffect(()=>{n.package!==void 0&&n.netweight!==void 0&&f(n.package*n.netweight)},[n]),a.useEffect(()=>{d(i-h)},[i]),a.useEffect(()=>{d(i-h)},[h]);const we=async()=>{new Date().getFullYear();let w=null,E=null,P=null,o=null;v.map(t=>{t.Account_type==="Factory"&&g===t.Company_name?E=t.id:t.Account_type==="Warehouse"&&ae===t.Company_name&&(w=t.id)}),m.map(t=>{t.Name===se?P=t.id:t.Name===ce&&(o=t.id)});let I=n.salenumber?n.salenumber:s.Sale_number,M=n.lotnumber?n.lotnumber:s.Lot_number,j=n.invoicenumber?n.invoicenumber:s.Invoice,O=n.grossweight?n.grossweight:s.Gross_weight,R=n.netweight?n.netweight:s.Net_weight,Z=n.package?n.package:s.Package,oe=n.offerprice?n.offerprice:s.Offer_price;const U={Sale_number:I,Lot_number:M,Invoice:j,Offer_price:oe,Category:z,Grade:Q,brokersID:V.authStore.model.id,Factory:E,Liquor_rating:o,Warehose:w,Leaf_rating:P,Gross_weight:O,Net_weight:R,Collection:h,Package:Z,Total_kg:R*Z,Grand_total:R*Z-h};try{if(await V.collection("catalog").update(`${s.id}`,U),n.maxbid||X)if(y){let t="";p.map(de=>{de.username===X&&(t=de.id)});let u=[];u=y.bidders,y.bidders.map(de=>{de!==t&&u.push(t)});const le={price_max:n.maxbid?n.maxbid:y.price_max,bidders:u,bidder_current:t,Status:!0},ua=await V.collection("auction_info").update(`${y.id}`,le);setTimeout(()=>{window.location.reload()},1e3)}else{let t="";p.map(le=>{le.username===X&&(t=le.id)});const u={catalog:s.id,price_max:n.maxbid,bidders:[`${t}`],bidder_current:t,Status:!0},Ve=await V.collection("auction_info").create(u);setTimeout(()=>{window.location.reload()},1e3)}}catch{throw new Error}},ie=T=>{T.preventDefault(),B.promise(we(),{loading:"Please wait...",success:e.jsx("b",{children:"Catalog updated!"}),error:e.jsx("b",{children:"Something went wrong!"})})};return e.jsx("div",{className:"p-4  bg-white z-50 w-screen h-screen overflow-y-scroll fixed inset-0",children:e.jsxs("form",{onSubmit:ie,className:"mx-auto max-w-md shadow sm:p-8 p-4 rounded-lg",children:[e.jsx("div",{onClick:r,className:"cursor-pointer hover:bg-black/80 duration-300 text-2xl right-4 sm:right-10 bg-black text-white p-4 rounded-lg z-50 md:right-24 md:text-4xl fixed",children:e.jsx(Re,{})}),e.jsx(c,{handle_input_change:S,icon:Ie,title:"Sale number",defaultValue:s.Sale_number,type:"number",placeholder:"Sale number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:Ae,title:"Lot number",type:"number",defaultValue:s.Lot_number,placeholder:"Lot number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:Fe,defaultValue:s.Invoice,title:"Invoice number",type:"text",placeholder:"Invoice number here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:Me,title:"Gross weight",defaultValue:s.Gross_weight,type:"number",placeholder:"Gross weight here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:ke,title:"Net weight",type:"number",defaultValue:s.Net_weight,placeholder:"Net weight here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:Ge,title:"Package",type:"number",defaultValue:s.Package,placeholder:"Package here..."}),e.jsx("div",{className:"h-2"}),e.jsx(c,{handle_input_change:S,icon:Pe,defaultValue:s.Offer_price,title:"Offer price",type:"number",placeholder:"Offer price here..."}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Leaf Rating"}),e.jsx(b,{selected:se,data:$,change:re}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Liquor Rating"}),e.jsx(b,{selected:ce,data:ne,change:D}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Factory "}),e.jsx(b,{selected:g,data:l,change:k}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Warehouse"}),e.jsx(b,{selected:ae,data:K,change:he}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Grade"}),e.jsx(b,{selected:Q,data:q,change:te}),e.jsx("div",{className:"h-3"}),e.jsx("p",{className:"mb-2",children:"Category"}),e.jsx(b,{selected:z,data:J,change:pe}),e.jsx("div",{className:"h-3"}),e.jsx("div",{className:"h-3"}),e.jsx(ue,{type:"submit",name:"Update Catalog",icon:Ze})]})})}const ca=new W(H);function ia({data:r}){const[s,l]=a.useState(!1);function C(i,f){return i.length<=f?i:i.substring(0,f)+"..."}const v=()=>{l(!s)},N=async()=>{try{await ca.collection("catalog").delete(`${r.id}`),window.location.reload()}catch(i){throw console.log(i),new i}},m=()=>{B(i=>e.jsxs("span",{children:[e.jsx("span",{className:"text-black font-semibold",children:"Are you sure? "}),e.jsx("button",{className:"ml-2 px-6 py-2 text-white rounded-lg bg-red-500",onClick:()=>{B.dismiss(i.id),B.promise(N(),{loading:"Please wait...",success:e.jsx("b",{children:"Deleted successfully!"}),error:e.jsx("b",{children:"Something went wrong!"})})},children:"Delete"})]}))},x=s?"":"hidden";return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:r.Sale_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:r.Lot_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:C(r.Invoice,10)}),e.jsxs("td",{className:"flex justify-center",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap flex items-center justify-center text-sm font-medium",children:e.jsx("a",{onClick:v,className:"text-black hover:text-black/50",href:"#",children:e.jsx(Ue,{})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap flex items-center justify-center text-sm font-medium",children:e.jsx("a",{onClick:m,className:"text-red-500 hover:text-red-500",href:"#",children:e.jsx(Ye,{})})})]})]}),e.jsx("div",{className:`${x}`,children:e.jsx(na,{click:v,data:r})})]})}const ve=new W(H);ve.autoCancellation(!1);function oa(){const[r,s]=a.useState([]);return a.useEffect(()=>{(async()=>{const l=ve.authStore.model.id,C=A(`${F}`,"catalogs"),v=A(`${F}`,"profile"),N=[],m=await ve.collection("Eligibility").getFullList({sort:"-created"});C.map(x=>{x.brokersID===l&&x.Season===m[0].Season&&x.Sale_number===parseInt(m[0].Sale_Number)&&v[0].id===m[0].Profile&&N.push(x)}),s(N)})()},[]),e.jsxs("div",{className:"shadow-md bg-white rounded-lg h-fit m-4",children:[e.jsx("div",{className:"py-3 px-6 border-b border-dashed",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h4",{className:"text-lg font-semibold tracking-tight text-slate-900",children:"Your catalog"})})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-full inline-block align-middle",children:e.jsx("div",{className:"border rounded-lg shadow-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Num."}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lot Num."}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Edit/Delete"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(l=>e.jsx(ia,{data:l}))})]})})})})})]})}const la=[{name:"Create",content:e.jsx(ra,{})},{name:"Edit",content:e.jsx(oa,{})}];function da(){return e.jsx("div",{className:"sm:mt-12",children:e.jsx(Te,{tabsData:la})})}function ya(){const[r,s]=a.useState("");return a.useEffect(()=>{const l=A(`${F}`,"profile");s(l[0].Account_type)},[]),e.jsxs(e.Fragment,{children:[r==="Association"?e.jsx(ta,{}):null,r==="Broker"?e.jsx(da,{}):null]})}export{ya as default};
